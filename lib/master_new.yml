name: Deploy API Application

on:
  push:
    branches:
      - master

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      # Step 1: Check out the repository code
      - name: Check out the code
        uses: actions/checkout@v3

      # Step 4: Deploy to Server (no build step needed)
      - name: Deploy to Server
        env:
          HOST: ${{ secrets.HOST }}
          USERNAME: ${{ secrets.SERVER_USERNAME }}
          PASSWORD: ${{ secrets.SERVER_PASSWORD }}
          TARGET_DIR: /var/www/api.graciousheartsmusic.com
         script: |
          cd /var/www/api.graciousheartsmusic.com/
          sh ./.scripts/deploy.sh
          
